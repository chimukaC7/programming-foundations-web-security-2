Deny lists and allow lists

-

- Let's talk about lists, lists that allow something and lists that deny something, and why allow lists are the more secure choice. Santa Claus famously keeps a list of children who are naughty and nice. Nice children get presents, but naughty children get a lump of coal. Deny and allow lists bring a similar idea to programming. Deny lists, sometimes known as blacklists or blocklists, are a reference list of items or actions which are negative and should be forbidden. It may be IP addresses that have been banned from accessing a server. It could be actions that a user's not allowed to take. It might be types of data that a server will not accept. Allow lists, sometimes known as white lists or safe lists, are the opposite. Instead of listing what should be forbidden, they list items or actions which should be permitted. The usernames that can access a website are a common example of an allow list. You may think that deny lists and allow lists are perfect opposites, and that the choice between them is a matter of preference. They are opposites, but they're not interchangeable. Let's look at the difference. Imagine three items which we will designate as A, B, and C. Let's say that only B should be accessible. Now, we could either add A and C to a deny list, or we could add B to an allow list. Both versions have the same effect. B will be available, and A and C will not. They seem interchangeable. Imagine that I add a new element, D, to the set of items, and D should not be accessible. If we had chosen the deny list approach, D would be accessible by default. It's up to us to remember to add D to the deny list. If we forget, then D may be exposed to the world and become a vulnerability. If we had chosen the allow list approach, D would be inaccessible by default. We don't have to remember to do anything extra. The world won't see it unless we take an action to allow it. It won't inadvertently become a vulnerability. Keeping items restricted by default is the more secure approach. Let's look at a concrete example now. A common development scenario is a web form which allows users to submit text and which allows some HTML tags to be used, but restricts others. Users should be able to make text bold or italic, but should not be able to add JavaScript or affect the page layout. The deny list approach requires listing every HTML tag that cannot be used. That would be a lot of tags, and we cannot forget any of them. If the HTML specifications admit new tags later, we would have to remember to update our list. The allow list approach requires listing a smaller number of permitted tags. If we forget a tag, it does not create a security problem. If new tags are added to HTML later, they'll be disallowed by default. The choice to use deny or allow lists comes up routinely while programming. Learn to recognize it as a pattern so that you can make a smart choice about which one to use. Deny lists do have legitimate uses, but restricting items by default and using allow lists is usually the more secure choice